<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TacOS: Référence du fichier kernel/elf.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TacOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Variables&#160;globale</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tout</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Structures de données</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Fichiers</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Fonctions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Définitions de type</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Énumérations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Fonctions</a>  </div>
  <div class="headertitle">
<div class="title">Référence du fichier elf.c</div>  </div>
</div><!--header-->
<div class="contents">

<p>Bibliotèque destinée à manipuler les fichiers exécutables ELF.  
<a href="#details">Plus de détails...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="elf_8h_source.html">elf.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="kmalloc_8h_source.html">kmalloc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="kunistd_8h_source.html">kunistd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="fd__types_8h_source.html">fd_types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="kernel_2include_2klibc_2string_8h_source.html">klibc/string.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Graphe des dépendances par inclusion de elf.c:</div>
<div class="dyncontent">
<div class="center"><img src="elf_8c__incl.png" border="0" usemap="#kernel_2elf_8c" alt=""/></div>
<map name="kernel_2elf_8c" id="kernel_2elf_8c">
<area shape="rect" id="node3" href="elf_8h.html" title="Bibliothèque destinée à manipuler les fichiers exécutables ELF." alt="" coords="5,83,51,111"/><area shape="rect" id="node5" href="kmalloc_8h.html" title="Allocateur mémoire en kernel space." alt="" coords="24,238,101,266"/><area shape="rect" id="node9" href="kunistd_8h.html" title="Principales fonctions de l&#39;API POSIX (read, write, seek, stat...)" alt="" coords="160,83,235,111"/><area shape="rect" id="node22" href="fd__types_8h.html" title="Structures liées aux fichiers ouverts." alt="" coords="371,315,451,343"/><area shape="rect" id="node25" href="kernel_2include_2klibc_2string_8h.html" title="Fonctions de manipulation de strings depuis le kernel." alt="" coords="421,83,515,111"/><area shape="rect" id="node7" href="kernel_2include_2types_8h.html" title="types.h" alt="" coords="213,393,275,421"/><area shape="rect" id="node12" href="ksyscall_8h.html" title="ksyscall.h" alt="" coords="168,315,245,343"/><area shape="rect" id="node15" href="kstat_8h.html" title="Manipulation des caractéristiques d&#39;un fichier." alt="" coords="235,161,296,189"/><area shape="rect" id="node18" href="clock_8h.html" title="Gestion de l&#39;horloge et du temps en général." alt="" coords="235,238,296,266"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Fonctions</h2></td></tr>
<tr class="memitem:a9aae782f070af1c6009d0cc2a6d60a08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="elf_8c.html#a9aae782f070af1c6009d0cc2a6d60a08">load_program_header</a> (<a class="el" href="structElf32__Phdr.html">Elf32_Phdr</a> *program_header, <a class="el" href="structElf32__Ehdr.html">Elf32_Ehdr</a> *elf_header, int index, int fd)</td></tr>
<tr class="memdesc:a9aae782f070af1c6009d0cc2a6d60a08"><td class="mdescLeft">&#160;</td><td class="mdescRight">charge un program header depuis un fichier elf Charge le program header n°index depuis le fichier  <a href="#a9aae782f070af1c6009d0cc2a6d60a08"></a><br/></td></tr>
<tr class="memitem:aa84790a8edae8d2859861f19adf5dd41"><td class="memItemLeft" align="right" valign="top">unsigned long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="elf_8c.html#aa84790a8edae8d2859861f19adf5dd41">elf_size</a> (int fd)</td></tr>
<tr class="memdesc:aa84790a8edae8d2859861f19adf5dd41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcul la taille que prendra l'exécutable dans la mémoire La fonction évalue l'adresse de départ en mémoire, et l'adresse de fin, et retourne la différence (il n'est pas suffisant d'additionner les tailles des différentes sections)  <a href="#aa84790a8edae8d2859861f19adf5dd41"></a><br/></td></tr>
<tr class="memitem:a35e8f32030ee36d8c02357a0b483c1b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="elf_8c.html#a35e8f32030ee36d8c02357a0b483c1b2">load_elf</a> (int fd, void *dest)</td></tr>
<tr class="memdesc:a35e8f32030ee36d8c02357a0b483c1b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">charge un fichier elf Charge les données utiles de l'exécutable en mémoire, de façon à ce que ce soit pret à exécuter  <a href="#a35e8f32030ee36d8c02357a0b483c1b2"></a><br/></td></tr>
<tr class="memitem:abbbb3d1f6ac9986f87d655cec7819556"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structElf32__File.html">Elf32_File</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="elf_8c.html#abbbb3d1f6ac9986f87d655cec7819556">load_elf_file</a> (int fd)</td></tr>
<tr class="memdesc:abbbb3d1f6ac9986f87d655cec7819556"><td class="mdescLeft">&#160;</td><td class="mdescRight">charge un fichier elf dans la structure <a class="el" href="structElf32__File.html" title="Structure qui caractérise un binaire elf.">Elf32_File</a>  <a href="#abbbb3d1f6ac9986f87d655cec7819556"></a><br/></td></tr>
<tr class="memitem:a8f556b72039271c88d4567c6e2f84ea0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structElf32__Sym.html">Elf32_Sym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="elf_8c.html#a8f556b72039271c88d4567c6e2f84ea0">find_symbol</a> (<a class="el" href="structElf32__File.html">Elf32_File</a> *file, const char *symbol)</td></tr>
<tr class="memdesc:a8f556b72039271c88d4567c6e2f84ea0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trouve un symbole dans un fichier.  <a href="#a8f556b72039271c88d4567c6e2f84ea0"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Description détaillée</h2>
<div class="textblock"><dl class="section author"><dt>Auteur</dt><dd>TacOS developers</dd></dl>
<h1><a class="anchor" id="LICENSE"></a>
LICENSE</h1>
<p>Copyright (C) 2010, 2011, 2012, 2013 - TacOS developers.</p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details at <a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a></p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, see <a href="http://www.gnu.org/licenses">http://www.gnu.org/licenses</a>.</p>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
</div><h2>Documentation des fonctions</h2>
<a class="anchor" id="aa84790a8edae8d2859861f19adf5dd41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long int elf_size </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>descripteur du fichier elf</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>taille prise initialement par l'exécutable en mémoire </dd></dl>

<p><div class="dynheader">
Voici le graphe des appelants de cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="elf_8c_aa84790a8edae8d2859861f19adf5dd41_icgraph.png" border="0" usemap="#elf_8c_aa84790a8edae8d2859861f19adf5dd41_icgraph" alt=""/></div>
<map name="elf_8c_aa84790a8edae8d2859861f19adf5dd41_icgraph" id="elf_8c_aa84790a8edae8d2859861f19adf5dd41_icgraph">
<area shape="rect" id="node3" href="kprocess_8c.html#a47ef452c5b4017727c9c4222ab133fae" title="Syscall pour exécuter un programme." alt="" coords="120,5,280,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8f556b72039271c88d4567c6e2f84ea0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structElf32__Sym.html">Elf32_Sym</a>* find_symbol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structElf32__File.html">Elf32_File</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>symbol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>Fichier dans lequel on recherche le symbole </td></tr>
    <tr><td class="paramname">symbol</td><td>Symbole cherché</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>symbole recherché </dd></dl>

<p><div class="dynheader">
Voici le graphe d'appel pour cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="elf_8c_a8f556b72039271c88d4567c6e2f84ea0_cgraph.png" border="0" usemap="#elf_8c_a8f556b72039271c88d4567c6e2f84ea0_cgraph" alt=""/></div>
<map name="elf_8c_a8f556b72039271c88d4567c6e2f84ea0_cgraph" id="elf_8c_a8f556b72039271c88d4567c6e2f84ea0_cgraph">
<area shape="rect" id="node3" href="kernel_2include_2klibc_2string_8h.html#a11bd144d7d44914099a3aeddf1c8567d" title="Compare deux chaînes." alt="" coords="145,5,207,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a35e8f32030ee36d8c02357a0b483c1b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_elf </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>descripteur du fichier à charger </td></tr>
    <tr><td class="paramname">dest</td><td>adresse à laquelle il faut charger l'exécutable</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>adresse du point d'entrée de l'exécutable </dd></dl>

<p><div class="dynheader">
Voici le graphe des appelants de cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="elf_8c_a35e8f32030ee36d8c02357a0b483c1b2_icgraph.png" border="0" usemap="#elf_8c_a35e8f32030ee36d8c02357a0b483c1b2_icgraph" alt=""/></div>
<map name="elf_8c_a35e8f32030ee36d8c02357a0b483c1b2_icgraph" id="elf_8c_a35e8f32030ee36d8c02357a0b483c1b2_icgraph">
<area shape="rect" id="node3" href="kprocess_8c.html#a47ef452c5b4017727c9c4222ab133fae" title="Syscall pour exécuter un programme." alt="" coords="120,5,280,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abbbb3d1f6ac9986f87d655cec7819556"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structElf32__File.html">Elf32_File</a>* load_elf_file </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File descriptor du fichier à charger.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>pointeur vers une structure Elf32_file chargée, NULL en cas d'échec </dd></dl>

<p><div class="dynheader">
Voici le graphe d'appel pour cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="elf_8c_abbbb3d1f6ac9986f87d655cec7819556_cgraph.png" border="0" usemap="#elf_8c_abbbb3d1f6ac9986f87d655cec7819556_cgraph" alt=""/></div>
<map name="elf_8c_abbbb3d1f6ac9986f87d655cec7819556_cgraph" id="elf_8c_abbbb3d1f6ac9986f87d655cec7819556_cgraph">
<area shape="rect" id="node3" href="kmalloc_8h.html#a5f52d7c56b7d67dc2f96b2e93dfdc7be" title="Allocation de size octets." alt="" coords="144,5,211,33"/><area shape="rect" id="node7" href="kernel_2include_2klibc_2string_8h.html#a11bd144d7d44914099a3aeddf1c8567d" title="Compare deux chaînes." alt="" coords="147,55,208,83"/><area shape="rect" id="node5" href="vmm_8h.html#a042a3049e6bc33c07f2b2c2a9dcfe78b" title="Alloue nb_pages pages qui sont placé en espace contigüe de la mémoire virtuelle." alt="" coords="260,5,399,33"/></map>
</div>
</p>

<p><div class="dynheader">
Voici le graphe des appelants de cette fonction :</div>
<div class="dyncontent">
<div class="center"><img src="elf_8c_abbbb3d1f6ac9986f87d655cec7819556_icgraph.png" border="0" usemap="#elf_8c_abbbb3d1f6ac9986f87d655cec7819556_icgraph" alt=""/></div>
<map name="elf_8c_abbbb3d1f6ac9986f87d655cec7819556_icgraph" id="elf_8c_abbbb3d1f6ac9986f87d655cec7819556_icgraph">
<area shape="rect" id="node3" href="kprocess_8c.html#a47ef452c5b4017727c9c4222ab133fae" title="Syscall pour exécuter un programme." alt="" coords="144,5,304,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9aae782f070af1c6009d0cc2a6d60a08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_program_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structElf32__Phdr.html">Elf32_Phdr</a> *&#160;</td>
          <td class="paramname"><em>program_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structElf32__Ehdr.html">Elf32_Ehdr</a> *&#160;</td>
          <td class="paramname"><em>elf_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">program_header</td><td>adresse où l'on veut charger le header </td></tr>
    <tr><td class="paramname">elf_header</td><td>header principal du fichier </td></tr>
    <tr><td class="paramname">index</td><td>numero du program header à charger </td></tr>
    <tr><td class="paramname">fd</td><td>descripteur du fichier à charger</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>0 si succès, -1 sinon </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré le Jeudi Mai 30 2013 19:08:34 pour TacOS par &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
